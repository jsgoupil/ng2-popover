{"version":3,"sources":["Popover.ts"],"names":[],"mappings":"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","file":"Popover.js","sourcesContent":["import { Directive, HostListener, ComponentRef, ViewContainerRef, ComponentFactoryResolver, ComponentFactory, Input, OnChanges, SimpleChange } from \"@angular/core\";\r\nimport {PopoverContent} from \"./PopoverContent\";\r\n\r\n@Directive({\r\n    selector: \"[popover]\",\r\n    exportAs: \"popover\"\r\n})\r\nexport class Popover implements OnChanges {\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Properties\r\n    // -------------------------------------------------------------------------\r\n\r\n    private popover: ComponentRef<PopoverContent>;\r\n    private visible: boolean;\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Constructor\r\n    // -------------------------------------------------------------------------\r\n\r\n    constructor(private viewContainerRef: ViewContainerRef,\r\n                private resolver: ComponentFactoryResolver) {\r\n    }\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Inputs / Outputs\r\n    // -------------------------------------------------------------------------\r\n\r\n    @Input(\"popover\")\r\n    content: string|PopoverContent;\r\n\r\n    @Input()\r\n    popoverDisabled: boolean;\r\n\r\n    @Input()\r\n    popoverAnimation: boolean;\r\n\r\n    @Input()\r\n    popoverPlacement: \"top\"|\"bottom\"|\"left\"|\"right\";\r\n    \r\n    @Input()\r\n    popoverTitle: string;\r\n\r\n    @Input()\r\n    popoverOnHover: boolean = false;\r\n\r\n    @Input()\r\n    popoverCloseOnClickOutside: boolean;\r\n\r\n    @Input()\r\n    popoverCloseOnMouseOutside: boolean;\r\n\r\n    @Input()\r\n    popoverDismissTimeout: number = 0;\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Event listeners\r\n    // -------------------------------------------------------------------------\r\n\r\n    @HostListener(\"click\")\r\n    showOrHideOnClick(): void {\r\n        if (this.popoverOnHover) return;\r\n        if (this.popoverDisabled) return;\r\n        this.toggle();\r\n    }\r\n\r\n    @HostListener(\"focusin\")\r\n    @HostListener(\"mouseenter\")\r\n    showOnHover(): void {\r\n        if (!this.popoverOnHover) return;\r\n        if (this.popoverDisabled) return;\r\n        this.show();\r\n    }\r\n\r\n    @HostListener(\"focusout\")\r\n    @HostListener(\"mouseleave\")\r\n    hideOnHover(): void {\r\n        if (this.popoverCloseOnMouseOutside) return; // don't do anything since not we control this\r\n        if (!this.popoverOnHover) return;\r\n        if (this.popoverDisabled) return;\r\n        this.hide();\r\n    }\r\n\r\n    ngOnChanges(changes: {[propertyName: string]: SimpleChange}) {\r\n        if(changes['popoverDisabled']){\r\n            if(changes['popoverDisabled'].currentValue){\r\n                this.hide();\r\n            }\r\n        }\r\n    }\r\n\r\n    // -------------------------------------------------------------------------\r\n    // Public Methods\r\n    // -------------------------------------------------------------------------\r\n\r\n    toggle() {\r\n        if (!this.visible) {\r\n            this.show();\r\n        } else {\r\n            this.hide();\r\n        }\r\n    }\r\n\r\n    show() {\r\n        if (this.visible) return;\r\n\r\n        this.visible = true;\r\n        if (typeof this.content === \"string\") {\r\n            const factory = this.resolver.resolveComponentFactory(PopoverContent);\r\n            if (!this.visible)\r\n                return;\r\n\r\n            this.popover = this.viewContainerRef.createComponent(factory);\r\n            const popover = this.popover.instance as PopoverContent;\r\n            popover.popover = this;\r\n            popover.content = this.content as string;\r\n            if (this.popoverPlacement !== undefined)\r\n                popover.placement = this.popoverPlacement;\r\n            if (this.popoverAnimation !== undefined)\r\n                popover.animation = this.popoverAnimation;\r\n            if (this.popoverTitle !== undefined)\r\n                popover.title = this.popoverTitle;\r\n            if (this.popoverCloseOnClickOutside !== undefined)\r\n                popover.closeOnClickOutside = this.popoverCloseOnClickOutside;\r\n            if (this.popoverCloseOnMouseOutside !== undefined)\r\n                popover.closeOnMouseOutside = this.popoverCloseOnMouseOutside;\r\n\r\n            popover.onCloseFromOutside.subscribe(() => this.hide());\r\n            // if dismissTimeout option is set, then this popover will be dismissed in dismissTimeout time\r\n            if (this.popoverDismissTimeout > 0)\r\n                setTimeout(() => this.hide(), this.popoverDismissTimeout);\r\n        } else {\r\n            const popover = this.content as PopoverContent;\r\n            popover.popover = this;\r\n            if (this.popoverPlacement !== undefined)\r\n                popover.placement = this.popoverPlacement;\r\n            if (this.popoverAnimation !== undefined)\r\n                popover.animation = this.popoverAnimation;\r\n            if (this.popoverTitle !== undefined)\r\n                popover.title = this.popoverTitle;\r\n            if (this.popoverCloseOnClickOutside !== undefined)\r\n                popover.closeOnClickOutside = this.popoverCloseOnClickOutside;\r\n            if (this.popoverCloseOnMouseOutside !== undefined)\r\n                popover.closeOnMouseOutside = this.popoverCloseOnMouseOutside;\r\n\r\n            popover.onCloseFromOutside.subscribe(() => this.hide());\r\n            // if dismissTimeout option is set, then this popover will be dismissed in dismissTimeout time\r\n            if (this.popoverDismissTimeout > 0)\r\n                setTimeout(() => this.hide(), this.popoverDismissTimeout);\r\n            popover.show();\r\n        }\r\n    }\r\n\r\n    hide() {\r\n        if (!this.visible) return;\r\n\r\n        this.visible = false;\r\n        if (this.popover)\r\n            this.popover.destroy();\r\n\r\n        if (this.content instanceof PopoverContent)\r\n            (this.content as PopoverContent).hideFromPopover();\r\n    }\r\n\r\n    getElement() {\r\n        return this.viewContainerRef.element.nativeElement;\r\n    }\r\n\r\n}"],"sourceRoot":""}